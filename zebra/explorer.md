# NightHawk Explorer support in Zebra report.

Repo:
https://github.com/nighthawk-apps/zcash-explorer


Official live explorer:
https://zcashblockexplorer.com/


## Support needed


| API METHOD                  | Supported in zebra | Notes                                                                                                                                                                                                               | Docs                                                                                                                                                                         | Used in                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| --------------------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| getblockhashes              | NO.                | As it is used in different places, with different arguments, it need all the fields and options.                                                                                                                    | [Zcash](https://zcash.github.io/rpc/getblockhashes.html)                                                                                                                     | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer/blocks/block_warmer.ex#L19) - [2](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer/transactions/transaction_cache.ex#L19) - [3](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/block_controller.ex#L54) - [4](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/block_controller.ex#L89)                                                                                                                              |
| getblock                    | YES, partially.    | At least the following fields are needed:<br>`height`<br>`size`<br>`hash`<br>`time`<br>`tx_count`<br>`output_total`                                                                                                 | [Zcash](https://zcash.github.io/rpc/getblock.html) - [Zebra](https://doc.zebra.zfnd.org/zebra_rpc/methods/trait.Rpc.html#tymethod.get_block)                                 | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer/blocks/block_warmer.ex#L24) - [2](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer/transactions/transaction_cache.ex#L24) - [3](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/block_controller.ex#L5) - [4](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/block_controller.ex#L12) - [5](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/search_controller.ex#L14) |
| getrawmempool               | YES, partially.    | We support this call, however the explorer use the verbose mode that zebra do not support yet.                                                                                                                      | [Zcash](https://zcash.github.io/rpc/getrawmempool.html) - [Zebra](https://doc.zebra.zfnd.org/zebra_rpc/methods/trait.Rpc.html#tymethod.get_raw_mempool)                      | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer/mempool/mempool_warmer.ex#L14)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| getinfo                     | YES, partially.    | At least the following fields are needed:<br>`blocks`<br>`commitments`<br>`difficulty`<br>`valuePools`<br>`build`<br>`size_on_ disk`<br>`size`<br><br>Some of this fields are missing ion the zebra implementation. | [Zcash](https://zcash.github.io/rpc/getinfo.html) - [Zebra](https://doc.zebra.zfnd.org/zebra_rpc/methods/trait.Rpc.html#tymethod.get_info)                                   | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer/metrics/info_warmer.ex#L14)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| getmempoolinfo              | NO.                | No arguments.                                                                                                                                                                                                       | [Zcash](https://zcash.github.io/rpc/getmempoolinfo.html)                                                                                                                     | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer/metrics/mempool_info_warmer.ex#L14)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| getblockchaininfo           | YES, partially.    | In the explorer this information is appended to an `info` array.                                                                                                                                                    | [Zcash](https://zcash.github.io/rpc/getblockchaininfo.html) - [Zebra](https://doc.zebra.zfnd.org/zebra_rpc/methods/trait.Rpc.html#tymethod.get_blockchain_info)              | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer/metrics/metrics_warmer.ex#L14)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| getnetworksolps             | YES.               | Appends the data from this call to the `info` array.<br>Zebra fully implement the arguments and results of this call.                                                                                               | [Zcash](https://zcash.github.io/rpc/getnetworksolps.html) - [Zebra](https://doc.zebra.zfnd.org/zebra_rpc/methods/trait.GetBlockTemplateRpc.html#tymethod.get_network_sol_ps) | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer/metrics/networksolps_warmer.ex#L14)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| getpeerinfo                 | YES, partially.    | Zebra only implements the `addr` field but the explorer take all the fields and add them to a `nodes`  array. I am unsure if then all the fields are displayed but probably.                                        | [Zcash](https://zcash.github.io/rpc/getpeerinfo.html) - [Zebra](https://doc.zebra.zfnd.org/zebra_rpc/methods/trait.GetBlockTemplateRpc.html#tymethod.get_peer_info)          | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer/nodes/nodes_warmer.ex#L14)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| getrawtransaction           | YES, partially.    | The `blockhash` argument is not used in the explorer which is good but at least the following fields are needed in the response:<br><br>txid<br>block_height<br>time<br>tx_out_total<br>size<br>type                | [Zcash](https://zcash.github.io/rpc/getrawtransaction.html) - [Zebra](https://doc.zebra.zfnd.org/zebra_rpc/methods/trait.Rpc.html#tymethod.get_raw_transaction)              | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer/transactions/transaction_cache.ex#L30) - [2](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/search_controller.ex#L15) - [3](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/transaction_controller.ex#L5) - [4](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/transaction_controller.ex#L12)                                                                                                     |
| getaddressbalance           | YES, partially.    | Zebra only accepts array of strings as parameters however the explorer also use single address string. We need to implement that.                                                                                   | [Zcash](https://zcash.github.io/rpc/getaddressbalance.html) - [Zebra](https://doc.zebra.zfnd.org/zebra_rpc/methods/trait.Rpc.html#tymethod.get_address_balance)              | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/address_controller.ex#L28) - [2](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/address_controller.ex#L72)                                                                                                                                                                                                                                                                                                                                                                     |
| getaddressdeltas            | NO.                | We need to implement almost fully.                                                                                                                                                                                  | [Zcash](https://zcash.github.io/rpc/getaddressdeltas.html)                                                                                                                   | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/address_controller.ex#L29) - [2](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/address_controller.ex#L73)                                                                                                                                                                                                                                                                                                                                                                     |
| z_listunifiedreceivers      | NO.                | Not implemented but zebra ill implement as part of the mining project: https://github.com/ZcashFoundation/zebra/issues/6030                                                                                         | [Zcash](https://zcash.github.io/rpc/z_listunifiedreceivers.html)                                                                                                             | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/address_controller.ex#L96)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| getblockheader              | NO.                | Need to fully implement in verbose mode.                                                                                                                                                                            | [Zcash](https://zcash.github.io/rpc/getblockheader.html)                                                                                                                     | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/block_controller.ex#L58) - [2](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/block_controller.ex#L93)                                                                                                                                                                                                                                                                                                                                                                         |
| sendrawtransaction          | YES.               | Fully implemengted.                                                                                                                                                                                                 | [Zcash](https://zcash.github.io/rpc/sendrawtransaction.html) - [Zebra](https://doc.zebra.zfnd.org/zebra_rpc/methods/struct.RpcImpl.html#method.send_raw_transaction)         | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/page_controller.ex#L18)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| z_validatepaymentdisclosure | NO.                | Need to be fully implemented https://zcash.github.io/rpc/z_validatepaymentdisclosure.html                                                                                                                           | [Zcash](https://zcash.github.io/rpc/z_validatepaymentdisclosure.html)                                                                                                        | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/page_controller.ex#L49)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| validateaddress             | NO.                | Not totally sure b ut it seems only the isvalid field in the response is needed.<br>https://zcash.github.io/rpc/validateaddress.html                                                                                | [Zcash](https://zcash.github.io/rpc/validateaddress.html)                                                                                                                    | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/search_controller.ex#L16)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| z_validateaddress           | NO.                | Same as `validateaddress`                                                                                                                                                                                           | [Zcash](https://zcash.github.io/rpc/z_validateaddress.html)                                                                                                                  | [1](https://github.com/nighthawk-apps/zcash-explorer/blob/main/lib/zcash_explorer_web/controllers/search_controller.ex#L17)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |


## Final goals


- Be able to run the explorer with a zebra backend replacement. Everything should work.
- Write a document explaining how to do it.


## Pros and cons

| Pros                                                                                                                          | Cons                                                                                                                         |
| ----------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| It is aligned with the idea of getting more users into zebra. If we can switch the official explorer implementation to zebra. | Almost all the rpc methods we already have, need changes to with with the explorer. In addition, new rpc methods are needed. |
| It follow pretty much what we were doing, last 2 zebra projects were rpc related, this is also in the same line.              | I am having a hard time trying to install the explorer in my local machine.                                                  |
| Can be started right away with small planning.                                                                                | It is not new, in the way zcash already do it. Also people might be bored of rpc methods.                                    |
| Indirectly can get more users are more API calls are exposed.                                                                 |                                                                                                                              |
| It should be easy to test.                                                                                                    |                                                                                                                              |

